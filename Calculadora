#include <stdio.h>
#include <stdlib.h>

int menu();

void outra_operacao(){
    char afirmacao;
    printf("Deseja realizar outra operacao? (s/n):\n");
    scanf(" %c", &afirmacao);
    if (afirmacao == 's'
    || afirmacao == 'S') {
        menu();
    } else if (afirmacao == 'n'
    || afirmacao == 'N'){
        printf("Obrigado por usar a calculadora! Ate a proxima.\n");
    } else {
        do{
            printf("Resposta invalida. Por favor, digite 's' para sim ou 'n' para nao.\n");
            scanf(" %c", &afirmacao);
        } while (afirmacao != 's'
                && afirmacao != 'S'
                && afirmacao != 'n'
                && afirmacao != 'N');
    }
}

int menu(){
    int opcao_escolhida;
    printf("===============================\n\tCalculadora Simples\n===============================\n");
    printf("Selecione uma operacao:\n");
    printf("1. Adicao\n2. Subtracao\n3. Multiplicacao\n4. Divisao\n5. Sair\n");
    printf("Opcao: \n");
    scanf("%d", &opcao_escolhida);

    switch(opcao_escolhida) {
        case 1: 
            float soma, a, b;
            printf("Digite o primeiro numero: \n");
            scanf("%f", &a);
            printf("Digite o segundo numero: \n");
            scanf("%f", &b);
            soma = a+b;
            printf("Resultado: %f + %f = %f\n", a, b, soma);
            outra_operacao();
            break;
        case 2:
            float sub, c, d;
            printf("Digite o primeiro numero: \n");
            scanf("%f", &c);
            printf("Digite o segundo numero: \n");
            scanf("%f", &d);
            sub = c-d;
            printf("Resultado: %f - %f = %f\n", c, d, sub);
            outra_operacao();
            break;
        case 3:
            float mult, e, f;
            printf("Digite o primeiro numero: \n");
            scanf("%f", &e);
            printf("Digite o segundo numero: \n");
            scanf("%f", &f);
            mult = e*f;
            printf("Resultado: %f * %f = %f\n", e, f, mult);
            outra_operacao();
            break;
        case 4:
            float div, g, h;
            printf("Digite o primeiro numero: \n");
            scanf("%f", &g);
            printf("Digite o segundo numero: \n");
            scanf("%f", &h);
            if (b == 0) {
                printf("Erro: Divisão por zero não é permitida.");
                outra_operacao();
            } else {
                div = g/h;
                printf("Resultado: %f / %f = %f\n", g, h, div);
                outra_operacao();
            }
            break;
        case 5:
            printf("Obrigado por usar a calculadora! Ate a proxima.\n");
            exit(0);
        default:
            do{
                printf("Resposta invalida. Por favor, digite uma das opcoes validas no menu.\n");
                scanf("%d", &opcao_escolhida);
            } while (opcao_escolhida != 1
                && opcao_escolhida != 2
                && opcao_escolhida != 3
                && opcao_escolhida != 4
                && opcao_escolhida != 5);
    }
    return opcao_escolhida;
}

int main() {
    int escolha;
    do{
    escolha = menu();
    } while(escolha != 5);
}
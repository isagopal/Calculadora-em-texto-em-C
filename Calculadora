#include <stdio.h>

int menu();

void outra_operacao(){
    char afirmacao;
    printf("Deseja realizar outra operacao? (s/n):\n");
    scanf(" %c", &afirmacao);
    if (afirmacao == 's'
    || afirmacao == 'S') {
        menu();
    } else if (afirmacao == 'n'
    || afirmacao == 'N'){
        printf("Obrigado por usar a calculadora! Ate a proxima.\n");
    } else {
        do{
            printf("Resposta invalida. Por favor, digite 's' para sim ou 'n' para nao.\n");
            scanf(" %c", &afirmacao);
        } while (afirmacao != 's'
                && afirmacao != 'S'
                && afirmacao != 'n'
                && afirmacao != 'N');
    }
}

void soma(){
    int s, a, b;
    printf("Digite o primeiro numero: \n");
    scanf("%d", &a);
    printf("Digite o segundo numero: \n");
    scanf("%d", &b);
    s = a+b;
    printf("Resultado: %d + %d = %d\n", a, b, s);
    outra_operacao();
}

void subtracao(){
    int sub, a, b;
    printf("Digite o primeiro numero: \n");
    scanf("%d", &a);
    printf("Digite o segundo numero: \n");
    scanf("%d", &b);
    sub = a-b;
    printf("Resultado: %d - %d = %d\n", a, b, sub);
    outra_operacao();
}

void multiplicacao(){
    int m, a, b;
    printf("Digite o primeiro numero: \n");
    scanf("%d", &a);
    printf("Digite o segundo numero: \n");
    scanf("%d", &b);
    m = a*b;
    printf("Resultado: %d * %d = %d\n", a, b, m);
    outra_operacao();
}

void divisao(){
    int d, a, b;
    printf("Digite o primeiro numero: \n");
    scanf("%d", &a);
    printf("Digite o segundo numero: \n");
    scanf("%d", &b);
    if (b == 0) {
        printf("Erro: Divisão por zero não é permitida.");
        outra_operacao();
    } else {
        d = a/b;
        printf("Resultado: %d / %d = %d\n", a, b, d);
        outra_operacao();
    }
}

int menu(){
    int opcao_escolhida;
    printf("===============================\n\tCalculadora Simples\n===============================\n");
    printf("Selecione uma operacao:\n");
    printf("1. Adicao\n2. Subtracao\n3. Multiplicacao\n4. Divisao\n5. Sair\n");
    printf("Opcao: \n");
    scanf("%d", &opcao_escolhida);

    switch(opcao_escolhida) {
        case 1: 
            soma();
            break;
        case 2:
            subtracao();
            break;
        case 3:
            multiplicacao();
            break;
        case 4:
            divisao();
            break;
        case 5:
            printf("Obrigado por usar a calculadora! Ate a proxima.\n");
            break;
        default:
            do{
                printf("Resposta invalida. Por favor, digite uma das opcoes validas no menu.\n");
                scanf("%d", &opcao_escolhida);
            } while (opcao_escolhida != 1
                && opcao_escolhida != 2
                && opcao_escolhida != 3
                && opcao_escolhida != 4
                && opcao_escolhida != 5);
    }
    return opcao_escolhida;
}

int main() {
    int escolha;
    do{
    escolha = menu();
    } while(escolha != 5);
}
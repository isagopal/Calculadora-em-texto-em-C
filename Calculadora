#include <stdio.h>

void outra_operacao(){
    char afirmacao;
    scanf("Deseja realizar outra operação? (s/n): %c\n", &afirmacao);
    if (afirmacao == 's'
    || afirmacao == 'S') {
        menu();
    } else if (afirmacao == 'n'
    || afirmacao == 'N'){
        printf("Obrigado por usar a calculadora! Ate a proxima.\n");
    } else {
        do{
            printf("Resposta invalida. Por favor, digite 's' para sim ou 'n' para nao.\n");
        } while (afirmacao != 's'
                && afirmacao != 'S'
                && afirmacao != 'n'
                && afirmacao != 'N');
    }
}

void soma(){
    int s, a, b;
    scanf("Digite o primeiro numero: %d\n", &a);
    scanf("Digite o segundo numero: %d\n", &b);
    s = a+b;
    printf("Resultado: %d + %d = %d\n", a, b, s);
    outra_operacao();
}

void subtracao(){
    int sub, a, b;
    scanf("Digite o primeiro numero: %d\n", &a);
    scanf("Digite o segundo numero: %d\n", &b);
    sub = a-b;
    printf("Resultado: %d - %d = %d\n", a, b, sub);
    outra_operacao();
}

void multiplicacao(){
    int m, a, b;
    scanf("Digite o primeiro numero: %d\n", &a);
    scanf("Digite o segundo numero: %d\n", &b);
    m = a*b;
    printf("Resultado: %d * %d = %d\n", a, b, m);
    outra_operacao();
}

void divisao(){
    int d, a, b;
    scanf("Digite o primeiro numero: %d\n", &a);
    scanf("Digite o segundo numero: %d\n", &b);
    if (b == 0) {
        printf("Erro: Divisão por zero não é permitida.");
        outra_operacao();
    } else {
        d = a/b;
        printf("Resultado: %d / %d = %d\n", a, b, d);
        outra_operacao();
    }
}

int menu(){
    int opcao_escolhida;
    printf("===============================\n\tCalculadora Simples\n===============================\n");
    printf("Selecione uma operacao:\n");
    printf("1. Adicao\n2. Subtracao\n3. Multiplicacao\n4. Divisao\n5. Sair\n");
    scanf("Opcao: %d\n");

    switch(opcao_escolhida) {
        case 1: 
            soma();
            break;
        case 2:
            subtracao();
            break;
        case 3:
            multiplicacao();
            break;
        case 4:
            divisao();
            break;
        case 5:
            printf("Obrigado por usar a calculadora! Ate a proxima.\n");
            break;
        default:
            do{
                scanf("Resposta invalida. Por favor, digite uma das opcoes validas no menu. %d\n", &opcao_escolhida);
            } while (opcao_escolhida != 1
                && opcao_escolhida != 2
                && opcao_escolhida != 3
                && opcao_escolhida != 4
                && opcao_escolhida != 5);
    }
}